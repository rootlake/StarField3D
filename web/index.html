<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Star Field 3D Viewer</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Tab Navigation -->
    <div class="tab-navigation">
        <button class="tab-button active" id="tab-data-entry" data-tab="data-entry">
            Data Entry
        </button>
        <button class="tab-button" id="tab-3d-model" data-tab="3d-model" disabled>
            3D Model
        </button>
    </div>
    
    <!-- Data Entry Tab -->
    <div id="data-entry-panel" class="tab-content active" data-tab="data-entry">
        <div class="panel-content">
            <!-- Top Bar - All Controls -->
            <div id="demo-library-controls" style="position: absolute; top: 20px; left: 20px; right: 20px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1); z-index: 10;">
                <div style="display: flex; gap: 15px; align-items: center; flex-wrap: nowrap;">
                    <div style="display: flex; align-items: center; gap: 8px; flex: 0 0 auto;">
                        <label for="demo-select" style="color: #ccc; font-size: 14px; white-space: nowrap;">Load Example:</label>
                        <select id="demo-select" style="padding: 6px 12px; background: #222; color: #fff; border: 1px solid #444; border-radius: 4px; font-size: 14px; min-width: 200px;">
                            <option value="">Select an example...</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; flex: 1; min-width: 0;">
                        <label for="csv-upload" style="color: #ccc; font-size: 14px; white-space: nowrap;">Upload CSV:</label>
                        <input type="file" id="csv-upload" accept=".csv" style="padding: 6px; background: #222; color: #fff; border: 1px solid #444; border-radius: 4px; font-size: 14px; flex: 1; min-width: 0;">
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; flex: 0 0 auto;">
                        <button type="button" id="export-csv" class="btn-secondary" style="padding: 8px 20px; font-size: 14px;">Export CSV</button>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; flex: 0 0 auto;">
                        <button type="button" id="generate-visualization" class="btn-primary" disabled style="padding: 8px 20px; font-size: 14px;">Generate 3D Model</button>
                    </div>
                </div>
            </div>
            
            <form id="star-data-form" style="margin-top: 100px;">
                <!-- Stars Card (moved to top) -->
                <div class="form-card" style="margin-bottom: 20px;">
                    <h3 style="margin: 0 0 16px 0; color: #cc3333; font-size: 18px; font-weight: 600;">Stars</h3>
                    <div id="stars-container">
                        <!-- Primary star -->
                        <div class="star-entry">
                            <div class="form-group star-label-group">
                                <label>Star Label:</label>
                                <input type="text" class="star-label" placeholder="e.g., Alpheratz" value="Alpheratz">
                                <div class="pixel-coords-inline">
                                    <span style="font-size: 11px; color: #999; margin-right: 4px;">Pixels:</span>
                                    <input type="number" class="pixel-x" placeholder="X" step="1" style="width: 70px;">
                                    <input type="number" class="pixel-y" placeholder="Y" step="1" style="width: 70px;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>HIP Number:</label>
                                <input type="number" class="hip-number" placeholder="e.g., 677" required>
                            </div>
                            <div class="form-group">
                                <label>Temperature (K):</label>
                                <div class="temperature-wrapper">
                                    <div class="temperature-color-preview" style="background: #444;"></div>
                                    <input type="number" class="temperature-k" placeholder="e.g., 9500" min="2000" max="50000" step="10" style="width: 120px;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Distance (pc):</label>
                                <input type="number" class="distance-pc" step="0.01" placeholder="e.g., 29.8" required>
                            </div>
                            <div class="form-group">
                                <label>App. Mag.:</label>
                                <input type="number" class="magnitude" step="0.1" placeholder="e.g., 2.1">
                            </div>
                        </div>
                    </div>
                    <div class="form-actions-inline">
                        <button type="button" id="add-star-btn" class="btn-secondary">Add Star (A-Z)</button>
                        <button type="button" id="remove-star-btn" class="btn-secondary">Remove Last Star</button>
                    </div>
                </div>
                
                <!-- Image Upload Card -->
                <div class="form-card">
                    <h3>Image Upload</h3>
                    <div style="display: flex; gap: 20px; align-items: flex-start;">
                        <div style="flex: 1;">
                            <div class="form-group">
                                <label for="image-upload">Front Image (PNG/JPG):</label>
                                <input type="file" id="image-upload" accept="image/png,image/jpeg,image/jpg" required>
                            </div>
                            <div id="image-preview-container" style="margin-top: 10px; display: none;">
                                <img id="image-preview" src="" alt="Front Preview" style="max-width: 100%; max-height: 250px; border: 1px solid rgba(255,255,255,0.3); border-radius: 4px;">
                            </div>
                        </div>
                        <div style="flex: 1;">
                            <div class="form-group">
                                <label for="back-image-upload">Back Image (PNG/JPG, optional):</label>
                                <input type="file" id="back-image-upload" accept="image/png,image/jpeg,image/jpg">
                            </div>
                            <div id="back-image-preview-container" style="margin-top: 10px; display: none;">
                                <img id="back-image-preview" src="" alt="Back Preview" style="max-width: 100%; max-height: 250px; border: 1px solid rgba(255,255,255,0.3); border-radius: 4px;">
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 3D Model Tab -->
    <div id="container" class="tab-content" data-tab="3d-model">
        <canvas id="canvas"></canvas>
        
        <!-- 3D Model Controls Panel (Upper Right) -->
        <div id="controls-panel" style="position: absolute; top: 20px; right: 20px; padding: 15px; background: rgba(0, 0, 0, 0.7); border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); z-index: 1000; max-width: 300px; color: #fff; font-size: 14px;">
            <h3 style="margin: 0 0 15px 0; color: #cc3333; font-size: 16px;">Controls</h3>
            
            <!-- Distance Unit -->
            <div style="margin-bottom: 12px;">
                <label style="display: block; margin-bottom: 5px;">Distance Unit:</label>
                <select id="distance-unit" style="width: 100%; padding: 6px; background: #222; color: #fff; border: 1px solid #444; border-radius: 4px;">
                    <option value="ly">Light Years</option>
                    <option value="pc">Parsecs</option>
                </select>
            </div>
            
            <!-- Visibility Toggles -->
            <div style="margin-bottom: 12px;">
                <label style="display: flex; align-items: center; margin-bottom: 8px;">
                    <input type="checkbox" id="toggle-wireframe" checked style="margin-right: 8px;">
                    Wireframe
                </label>
                <label style="display: flex; align-items: center; margin-bottom: 8px;">
                    <input type="checkbox" id="toggle-distance-labels" checked style="margin-right: 8px;">
                    Distance Labels
                </label>
                <label style="display: flex; align-items: center; margin-bottom: 8px;">
                    <input type="checkbox" id="toggle-star-labels" checked style="margin-right: 8px;">
                    Star Labels
                </label>
                <label style="display: flex; align-items: center; margin-bottom: 8px;">
                    <input type="checkbox" id="toggle-info-labels" checked style="margin-right: 8px;">
                    Info Labels
                </label>
                <label style="display: flex; align-items: center; margin-bottom: 8px;">
                    <input type="checkbox" id="toggle-star-lines" checked style="margin-right: 8px;">
                    Star Lines
                </label>
                <label style="display: flex; align-items: center; margin-bottom: 12px;">
                    <input type="checkbox" id="toggle-star-spheres" checked style="margin-right: 8px;">
                    Star Spheres
                </label>
            </div>
            
            <!-- Sliders -->
            <div style="margin-bottom: 12px;">
                <label style="display: block; margin-bottom: 5px;">
                    Info Label Size: <span id="label-size-value">1.0</span>
                </label>
                <input type="range" id="label-size" min="0.5" max="2.0" step="0.1" value="1.0" style="width: 100%;">
            </div>
            
            <div style="margin-bottom: 12px;">
                <label style="display: block; margin-bottom: 5px;">
                    Star Label Size: <span id="star-label-size-value">1.0</span>
                </label>
                <input type="range" id="star-label-size" min="0.5" max="2.0" step="0.1" value="1.0" style="width: 100%;">
            </div>
            
            <div style="margin-bottom: 0;">
                <label style="display: block; margin-bottom: 5px;">Star Label Color:</label>
                <input type="color" id="star-label-color" value="#ffffff" style="width: 100%; height: 40px; border: 1px solid #444; border-radius: 4px; cursor: pointer;">
            </div>
        </div>
    </div>

    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.165.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/"
        }
    }
    </script>

    <script type="module" src="js/main.js"></script>
</body>
</html>

